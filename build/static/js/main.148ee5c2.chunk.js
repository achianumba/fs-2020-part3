(this.webpackJsonpPhonebook=this.webpackJsonpPhonebook||[]).push([[0],{17:function(e,t,n){e.exports=n(40)},22:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(16),r=n(2),c=n(0),o=n.n(c),u=n(15),l=n.n(u),s=(n(22),n(4)),i=n.n(s),m="/api/persons",d=function(){return i.a.get(m)},f=function(e){return i.a.post(m,e)},p=function(e,t){return i.a.put("".concat(m,"/").concat(e),t)},b=function(e){return i.a.delete("".concat(m,"/").concat(e))},h=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],u=t[1],l=Object(c.useState)(""),s=Object(r.a)(l,2),i=s[0],m=s[1],h=Object(c.useState)(""),y=Object(r.a)(h,2),j=y[0],O=y[1],N=Object(c.useState)(""),w=Object(r.a)(N,2),S=w[0],k=w[1],C=Object(c.useState)(0),x=Object(r.a)(C,2),D=x[0],P=x[1],A=Object(c.useState)({content:"",type:""}),F=Object(r.a)(A,2),J=F[0],B=F[1],I=function(e,t){B({content:e,type:t}),setTimeout((function(){return B({content:"",type:""})}),5e3)};return Object(c.useEffect)((function(){d("http://localhost:3001/persons").then((function(e){return u(e.data)}))}),[]),o.a.createElement("div",{id:"phonebook"},o.a.createElement("h2",null,"Phonebook"),""!==J.content?o.a.createElement("p",{className:"message message-".concat(J.type)},J.content):"",o.a.createElement("div",{id:"left"},o.a.createElement(v,{handleSearch:function(e){if(e.preventDefault(),0===e.target.value)return P(0);k(e.target.value);var t=n.filter((function(t){return new RegExp("^".concat(e.target.value),"i").test(t.name)}));P(t)},search:S}),o.a.createElement(E,{submit:function(e){e.preventDefault();var t=n.some((function(e){return e.name===i})),r=n.some((function(e){return e.number===j})),c=n.find((function(e){var t=e.name,n=e.number;return t===i&&n!==j}));if(""===i||""===j)return I("Please enter a valid name and phone number","warning");if(void 0===c)return t&&r?I("".concat(i," already exists"),"warning"):(f({name:i,number:j}).then((function(e){u([].concat(Object(a.a)(n),[e.data])),I("Added ".concat(e.data.name," successfully!"),"success")})).catch((function(e){console.error(e.response.data.error),I(e.response.data.error,"error")})),m(""),O(""));var o=c.name;return window.confirm("".concat(o," already exists. Do you want to replace it?"))?p(c.id,{number:j}).then((function(e){u(n.filter((function(t){return t.id!==e.data.id})).concat(e.data)),I("Updated ".concat(e.data.name," successfully"),"success"),m(""),O("")})).catch((function(e){console.log(e.response.data.error),I(e.response.data.error,"error")})):void 0},setName:function(e){return m(e.target.value)},name:i,setNumber:function(e){return O(e.target.value)},number:j})),o.a.createElement(g,{results:D,persons:n,deleteContact:function(e){if(e.preventDefault(),"delete-contact"===e.target.className){var t=e.target.closest("div").firstChild.textContent,a=e.target.closest("div").dataset.id;window.confirm("Delete ".concat(t,"?"))&&b(a).then((function(){u(n.filter((function(e){return e.id!==a}))),I("".concat(t," deleted successfully!"),"success")})).catch((function(e){console.error(e.response.data.error),I(e.response.data.error,"error")}))}}}))},v=function(e){var t=e.handleSearch,n=e.search;return o.a.createElement("div",{id:"search-filter"},o.a.createElement("label",{htmlFor:"search"},"Search:"),o.a.createElement("input",{onChange:t,type:"search",value:n}))},E=function(e){var t=e.submit,n=e.setName,a=e.name,r=e.setNumber,c=e.number;return o.a.createElement("form",{onSubmit:t},o.a.createElement("h3",null,"Add new contact"),o.a.createElement("label",{htmlFor:"name"},"Name:"),o.a.createElement("input",{type:"text",onChange:n,value:a}),o.a.createElement("label",{htmlFor:"number"},"Number:"),o.a.createElement("input",{type:"text",onChange:r,value:c}),o.a.createElement("button",{type:"submit"},"Add"))},g=function(e){var t=e.results,n=e.persons,a=e.deleteContact;return o.a.createElement("div",{id:"contacts",onClick:a},o.a.createElement("h2",null,"Numbers"),0!==t?t.map((function(e){var t=e.name,n=e.number,a=e.id;return o.a.createElement("div",{key:a,className:"contact","data-id":a},o.a.createElement("p",null,t),o.a.createElement("p",null,n," ",o.a.createElement("button",{className:"delete-contact"},"Delete")))})):n.map((function(e){var t=e.name,n=e.number,a=e.id;return o.a.createElement("div",{key:a,className:"contact","data-id":a},o.a.createElement("p",null,t),o.a.createElement("p",null,n," ",o.a.createElement("button",{className:"delete-contact"},"Delete")))})))};l.a.render(o.a.createElement(h,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.148ee5c2.chunk.js.map