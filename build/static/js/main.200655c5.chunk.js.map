{"version":3,"sources":["trash.png","avatar.png","transactions.js","index.js"],"names":["module","exports","baseUrl","axios","get","contact","post","id","put","delete","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","personsLoaded","setPersonsLoaded","search","setSearch","results","setResults","content","type","message","setMessage","showNotification","msg","t","setTimeout","useEffect","transactions","then","res","data","className","handleSearch","e","preventDefault","target","value","filter","person","RegExp","test","name","submit","duplicateName","some","duplicateNumber","number","numberUpdate","find","undefined","catch","err","console","error","response","contactName","window","confirm","concat","log","setName","setNumber","deleteContact","dataset","contactId","SearchFilter","onChange","placeholder","AddPerson","onSubmit","Contacts","contactList","list","map","key","src","avatar","alt","trash","title","data-name","data-id","onClick","length","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.200655c5.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfkBQMOOxnJE7lYAAABhklEQVRIx72UO1ICQRCGvxVIUNGEtVSqvIZeAC5ggBlnMNYreAaNrILUMvACGhFrKCxaPBIeUoU8xoBhd3a3B5bEf4Kd3u75prt3dsCmEnV+USgm1LlkS1VYoEKjIgc64ttDPskx54URsEeRFH3O6Cfdv4RCcePbtygURSl0RwTkAPjw7XcADmwlXHMeeVvgAnjFs9grvXEHUI20K/mo2kr4Tzm6lY+WD2qX4opFYHa2rr+N3nsps78zhuKeQ2aG1QoDmr6jQIayntdwcKhpq0yGgh/XtGWQAjpiBm0gvRngAl0R0NXe0Ip4CXkroKe9CTIY8xNbPmKcPAOpCx3DK2agQoB4Ed0QQEU/44TeVoAukzAgKMJdW4IbiTYAqzYmy8CLA5pbAdZk4K4FuJFoAbBL1tqDLNnNANtZFA+y1IMlQM4gH48OAC3/KLnAPAZYYB6jLwQ19F0zYCreQVMGetYIFpm38rN+7ht/vak0+3r2JPo5wkt0G35zjEWnPGyAeNxzYi75AyLu4ua9hqYNAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIwLTA1LTAzVDE0OjU5OjI1KzAwOjAw2zd7CAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMC0wNS0wM1QxNDo1OToyNSswMDowMKpqw7QAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAADdAAAA3QFwU6IHAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAASlQTFRF////AP//AP//gP//gL//VdX/TczmRrnoVb/qScjtObjxQL/yTbPmScLzRq7oRcT1TLPsRMTuQ7XyRrPyR8PvRLb1RMHvRLbtQ8DyRcLzRL/vRsHwRMLxRMLyRbTtRMHwRa/uRcLyRsHyRLHwRMDwRrPvRK/tRbHtRK/vRsHxRcLyRa/uRcDyRMDwRK7tRMDxRK/tRcHxRcHxRa/vRa/tRsHxRK/uRcLyRcHwRMDxRcHxRMHyRa7uRa3tRK3tRsHxRa3tRcHxRK3uRcHxRK3uRKzuRcHwRMDxRK3uRsLxRavtRKvtRcHxRKrtRcHxRKruRcHxRaruRcHxRKrtRMHxRKntRKjsRKjsRKjtRKftRcHxRKbsRabtRcHxRKbsRKbtRcHxRKTsRcHxY3WbmAAAAGF0Uk5TAAECAgQGCgsMDhIUFBUWGhseJigvMTE4OT9AQktPVVZZYGNlZW5wc4CAhYaGio6Oj5OUnKChoqqus7i+wMXGxsnKzc7R0tLY3Nzj5ebo6evt7vHy8vT29/n6/P39/f7+/rELeicAAAECSURBVDjLndLHWkJBDAXgAyiKig0b9obYe2/Yu4IFUCzc5P0fwgX43ZlMZmO251+kAUb1ze09fD4ejkOvxvkKMxMRHTVreesVcx1QuVsBOxwCunPzMTYBrTrg2gbvMk8ENqBOAdIsQEaASQk2BRiQYEqAeEWAFtnluQ1KzphDgQWy7qbWTXCprLppPwT5dvWc0281UN323BsdE2u514uNXvy3Isme9OBMZjQVVePhrcJfkz83s06c3LUXdZ+y85EneYuvBTNfZJaA6Nh4hkAD4UvEb1kFH211sMI6oLNa3vXtA9RvPbwClgEAS35wAgA48INnAIi8+EE1CiB26gfFBvwC7+vHbBSPmMwAAAAASUVORK5CYII=\"","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getContacts = () =>  axios.get(baseUrl);\r\n\r\nconst addContact = contact => axios.post(baseUrl, contact);\r\n\r\nconst updateContact = (id, contact) => axios.put(`${baseUrl}/${id}`, contact);\r\n\r\nconst deleteContact = id => axios.delete(`${baseUrl}/${id}`);\r\n\r\nexport default { \r\n  getContacts: getContacts,\r\n  addContact: addContact,\r\n  updateContact: updateContact,\r\n  deleteContact: deleteContact\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport trash from \"./trash.png\";\r\nimport avatar from \"./avatar.png\";\r\nimport transactions from \"./transactions\";\r\n/*\r\n=====================\r\nPhonebook\r\n=====================\r\n*/\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [personsLoaded, setPersonsLoaded] = useState(false);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [results, setResults] = useState(0);\r\n  const [message, setMessage] = useState({ content: \"\", type: \"\" });\r\n\r\n  //notification\r\n  const showNotification = (msg, t) => {\r\n    setMessage({ content: msg, type: t });\r\n    setTimeout(\r\n      () =>\r\n        setMessage({\r\n          content: \"\",\r\n          type: \"\",\r\n        }),\r\n      5000\r\n    );\r\n  };\r\n\r\n  const submit = (e) => {\r\n    e.preventDefault();\r\n\r\n    let duplicateName = persons.some(({ name }) => name === newName);\r\n    let duplicateNumber = persons.some(({ number }) => number === newNumber);\r\n    let numberUpdate = persons.find(\r\n      ({ name, number }) => name === newName && number !== newNumber\r\n    );\r\n\r\n    if (newName === \"\" || newNumber === \"\") {\r\n      return showNotification(\r\n        `Please enter a valid name and phone number`,\r\n        \"warning\"\r\n      );\r\n    } else if (numberUpdate !== undefined) {\r\n      let contactName = numberUpdate.name,\r\n        confirmed = window.confirm(\r\n          `${contactName} already exists. Do you want to replace it?`\r\n        );\r\n\r\n      if (confirmed) {\r\n        return transactions\r\n          .updateContact(numberUpdate.id, {\r\n            number: newNumber,\r\n          })\r\n          .then((res) => {\r\n            setPersons(\r\n              persons.filter(({ id }) => id !== res.data.id).concat(res.data)\r\n            );\r\n            showNotification(\r\n              `Updated ${res.data.name} successfully`,\r\n              \"success\"\r\n            );\r\n            setNewName(\"\");\r\n            setNewNumber(\"\");\r\n          })\r\n          .catch((err) => {\r\n            console.log(err.response.data.error);\r\n            showNotification(err.response.data.error, \"error\");\r\n          });\r\n      }\r\n    } else if (duplicateName && duplicateNumber) {\r\n      return showNotification(`${newName} already exists`, \"warning\");\r\n    } else {\r\n      transactions\r\n        .addContact({ name: newName, number: newNumber })\r\n        .then((res) => {\r\n          setPersons([...persons, res.data]);\r\n          showNotification(`Added ${res.data.name} successfully!`, \"success\");\r\n        })\r\n        .catch((err) => {\r\n          console.error(err.response.data.error);\r\n          showNotification(err.response.data.error, \"error\");\r\n        });\r\n      setNewName(\"\");\r\n      return setNewNumber(\"\");\r\n    }\r\n  };\r\n\r\n  const handleSearch = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (e.target.value === 0) return setResults(0);\r\n\r\n    setSearch(e.target.value);\r\n    let results = persons.filter((person) =>\r\n      new RegExp(`^${e.target.value}`, \"i\").test(person.name)\r\n    );\r\n    setResults(results);\r\n  };\r\n\r\n  //delete\r\n  const handleDelete = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (e.target.className === \"delete-contact\") {\r\n      let contactName = e.target.dataset.name,\r\n        contactId = e.target.dataset.id,\r\n        confirmed = window.confirm(`Delete ${contactName}?`);\r\n\r\n      if (confirmed) {\r\n        transactions\r\n          .deleteContact(contactId)\r\n          .then(() => {\r\n            setPersons(persons.filter(({ id }) => id !== contactId));\r\n            showNotification(`${contactName} deleted successfully!`, \"success\");\r\n          })\r\n          .catch((err) => {\r\n            console.error(err.response.data.error);\r\n            showNotification(err.response.data.error, \"error\");\r\n          });\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    transactions.getContacts(\"http://localhost:3001/persons\").then((res) => {\r\n      setPersonsLoaded(true);\r\n      setPersons(res.data);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div id=\"phonebook\">\r\n      {message.content !== \"\" ? (\r\n        <p className={`message message-${message.type}`}>{message.content}</p>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n      <div id=\"left\">\r\n        <h1>PhoneBook</h1>\r\n        <SearchFilter handleSearch={handleSearch} search={search} />\r\n        <AddPerson\r\n          submit={submit}\r\n          setName={(e) => setNewName(e.target.value)}\r\n          name={newName}\r\n          setNumber={(e) => setNewNumber(e.target.value)}\r\n          number={newNumber}\r\n        />\r\n      </div>\r\n      <Contacts\r\n        results={results}\r\n        persons={persons}\r\n        deleteContact={handleDelete}\r\n        personsLoaded={personsLoaded}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n/*\r\n=====================\r\nFilter\r\n=====================\r\n*/\r\nconst SearchFilter = ({ handleSearch, search }) => {\r\n  return (\r\n    <div id=\"search-filter\">\r\n      <input\r\n        onChange={handleSearch}\r\n        type=\"search\"\r\n        value={search}\r\n        placeholder=\"Search\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n/*\r\n========================\r\nForm for adding contacts\r\n========================\r\n*/\r\nconst AddPerson = ({ submit, setName, name, setNumber, number }) => {\r\n  return (\r\n    <form onSubmit={submit}>\r\n      <h2>Add a new contact</h2>\r\n      <input type=\"text\" onChange={setName} value={name} placeholder=\"Name\" />\r\n\r\n      <input\r\n        type=\"text\"\r\n        onChange={setNumber}\r\n        value={number}\r\n        placeholder=\"Phone number\"\r\n      />\r\n      <button type=\"submit\">Save contact</button>\r\n    </form>\r\n  );\r\n};\r\n/*\r\n=====================\r\nContacts\r\n=====================\r\n*/\r\nconst Contacts = ({ results, persons, deleteContact, personsLoaded }) => {\r\n  const contactList = (list, personsLoaded) => {\r\n    return list === 1 ? (\r\n      <h2 id=\"loading\">Loading phonebook...</h2>\r\n    ) : list === 0 ? (\r\n      <>\r\n        <h2 className=\"empty-list\">\r\n          No contacts have been added to this phonebook\r\n        </h2>\r\n        <h4 className=\"empty-list\">\r\n          Use the <em>Add a contact</em> form to save a person's name and number\r\n          now.\r\n        </h4>\r\n      </>\r\n    ) : (\r\n      list.map(({ name, number, id }) => (\r\n        <div key={id} className=\"contact\">\r\n          {/* Avatar */}\r\n          <img className=\"avatar\" src={avatar} alt={`${name}'s avatar`} />\r\n          {/* Details */}\r\n          <div className=\"contact-details\">\r\n            <p className=\"contact-name\">{name}</p>\r\n            <p className=\"contact-number\">{number}</p>\r\n          </div>\r\n          {/* Delete button */}\r\n          <img\r\n            className=\"delete-contact\"\r\n            src={trash}\r\n            alt=\"delete contact\"\r\n            title={`Delete ${name}`}\r\n            data-name={name}\r\n            data-id={id}\r\n          />\r\n        </div>\r\n      ))\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div id=\"contacts\" onClick={deleteContact}>\r\n      <h1>PhoneBook</h1>\r\n      {persons.length === 0 && personsLoaded === false\r\n        ? contactList(1)\r\n        : persons.length === 0\r\n        ? contactList(0)\r\n        : results !== 0\r\n        ? contactList(results)\r\n        : contactList(persons)}\r\n    </div>\r\n  );\r\n};\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}